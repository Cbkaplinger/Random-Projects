---
title: "Random Forest XG Boost"
---

```{r}
library(tidyverse)
library(nflfastR)
library(ggthemes)
library(ranger)
library(vip)
library(caret)
library(xgboost)
library(ggimage)
options(scipen = 9999)
```


```{r}
# Pulls up a play by play from 2015-2022
pbp <- load_pbp(2015:2022)
```


```{r}
pbp |>
  filter(!is.na(down), !is.na(field_goal_attempt)) |> 
  group_by(down) |> 
  summarize(field_goal_attempts = sum(field_goal_attempt))
```


```{r}
field_goals <- pbp |> 
  filter(field_goal_attempt == 1) |> 
  mutate(field_goal_made = ifelse(field_goal_result == "made", 1, 0)) |> 
  select(yardline_100, half_seconds_remaining, 
         goal_to_go, score_differential, roof, surface,
         temp, wind, field_goal_made, kicker_player_name)
```

```{r}
colSums(is.na(field_goals))
```
```{r}
field_goals <- field_goals |> filter(is.na(roof))

```

